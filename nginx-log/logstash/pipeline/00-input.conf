input {
        beats {
		type => "beats"
                port => 5044
        }


        udp {
		type => "syslog"
                port => 5045
 		codec => "json"                                                                          

        }
}


    


output {


if [type] == "syslog" {
       opensearch {
                hosts => ["https://opensearch-node1:9200", "https://opensearch-node2:9200", "https://opensearch-node3:9200"]
                ssl => true
                ssl_certificate_verification => false
                user => admin
                password => admin
                index => "%{type}-log-%{+YYYY.MM.dd}"
        } # end of elastic

} # end of if
else {
         opensearch {
                hosts => ["https://opensearch-node1:9200", "https://opensearch-node2:9200", "https://opensearch-node3:9200"]
                ssl => true
                ssl_certificate_verification => false
                user => admin
                password => admin
                index => "%{[@metadata][beat]}-log-nginx-%{[host][hostname]}-%{+YYYY.MM.dd}"
        } # end of elastic
} # end of else

} # end of output




